<div ng-show="processingReveiw" id="image-loading">
    <div class="center">

        <center>
        <img src="./assets/images/logos/logo-white.png"/>
          <!-- <img src="processing.gif" width="50px"/> -->
        </center>

        <!-- Material Design Spinner -->
        <div class="spinner-wrapper">
            <div class="spinner">
                <div class="inner">
                    <div class="gap"></div>
                    <div class="left">
                        <div class="half-circle"></div>
                    </div>
                    <div class="right">
                        <div class="half-circle"></div>
                    </div>
                </div>
            </div>
        </div>
        <!-- / Material Design Spinner -->
    </div>
</div>

<md-dialog style="max-width: 90%; max-height: 90%;" aria-label="Employee Appraisal Form" flex draggable >
    <md-toolbar style="background-color: #fff;">
        <div class="md-toolbar-tools">
          <h2 style="color: #455a64; font-weight: bold;" class="details_heading">Employee Appraisal Form</h2>
          <span flex></span>
          <md-button class="md-icon-button" ng-click="cancel()">
            <md-icon style="color: #455a64; font-weight: bold;" md-svg-src="./assets/icons/svg/close-button.svg" aria-label="Close dialog"></md-icon>
          </md-button>
        </div>
      </md-toolbar>
      <md-dialog-content>

    <div layout="column" class="page" layout-fill>

      <fieldset id="viewfieldset">
        <h3 style="padding-left: 10px; margin: 10px 0px; font-weight: bold; color: #263238;">EMPLOYEE PROFILE</h3>
          <div class="personal-profile" layout="row">
            <div class="profile-details" layout="column" flex>
              <div class="header" style="border-radius: 0px;">
                  <h1 style="font-weight: bold; font-size:17px;">{{user.firstname+' '+user.lastname}}
                  </h1>
              </div>
                <div class="details" layout="row" layout-wrap>
                    <div flex="25">
                        <p style="font-weight: bold; font-size:15px;">Line Of Business</p>
                        <span>{{user.lob||'N/A'}}</span>
                    </div>
                    <div flex="25">
                        <p style="font-weight: bold; font-size:15px;">Recruitment Date</p>
                        <span>{{user.personalInfo.recruitmentDate||"N/A"}}</span>
                    </div>
                    <div flex="25">
                        <p style="font-weight: bold; font-size:15px;">Location/based at </p>
                        <span>{{user.personalInfo.location}}</span>
                    </div>
                    <div flex="25">
                        <p style="font-weight: bold; font-size:15px;">Year or period covered</p>
                        <span>{{user.personalInfo.periodCovered}}</span>
                    </div>
                    <div flex="25">
                        <p style="font-weight: bold; font-size:15px;">Time in present position</p>
                        <span>{{user.personalInfo.timeInPresentPosition}}</span>
                    </div>
                    <div flex="25">
                        <p style="font-weight: bold; font-size:15px;">Length of service</p>
                        <span>{{user.personalInfo.lengthOfService}}</span>
                    </div>
                    <div flex="25">
                        <p style="font-weight: bold; font-size:15px;">Appraisal date & time</p>
                        <span>{{appraisalDate|date:'medium'}}</span>
                    </div>
                    <div flex="25">
                        <p style="font-weight: bold; font-size:15px;">Appraisal venue</p>
                        <span>{{user.personalInfo.appraisalVenue}}</span>
                    </div>
                    <div flex="25">
                        <p style="font-weight: bold; font-size:15px;">Appraiser</p>
                        <span>{{user.personalInfo.appraiser}}</span>
                    </div>
                  </div>
                </div>
              </div>
            </fieldset>
            <fieldset id="viewfieldset" style="padding: 10px;">
            <legend class="legend_style">GOALS & OBJECTIVES</legend>
              <div class="personal-profile" layout="row">
                <div class="profile-details" layout="column" flex>
                  <!-- <p>A brief description of employee's understanding and contributions to the overall objective of the organisation in 2017 </p> -->
                  <div class="details" layout="row" layout-wrap>
                      <div flex>
                          <!-- <p>RESPONSE</p> -->
                        <span>{{objectives.objectives}}</span>
                    </div>
                  </div>
                </div>
              </div>
            </fieldset>
                  <fieldset id="viewfieldset" style="padding: 10px;">
                    <legend class="legend_style">EMPLOYEEâ€™S SELF- ASSESSMENT</legend>
                      <div class="personal-profile" layout="row">
                        <div class="profile-details" layout="column" flex>
                          <!-- <p>Your Job Summary: Summary of Employee's responsibilities during this period, including significant projects. </p> -->

                            <div class="visits" flex>
                                <h2 class="legend_style2">
                                    <md-icon class="icon_padding" md-svg-src="./assets/icons/svg/added/Admit.svg"></md-icon>Job Summary</h2>
                                <div class="single-visit">
                                    <md-table-container>
                                        <table md-table ng-model="selected" md-progress="promise">
                                          <!-- <thead md-head>
                                            <tr md-row>
                                              <th md-column md-order-by="name" ><span style="font-weight: bold; font-size:15px;">Creed </span></th>
                                              <th md-column md-order-by="type"><span style="font-weight: bold; font-size:15px;">Definitions</span></th>
                                              <th md-column md-order-by="type"><span style="font-weight: bold; font-size:15px;">Ratings</span></th>
                                            </tr>
                                          </thead> -->
                                          <tbody md-body>
                                            <tr md-row md-select="user" md-on-select="logItem" md-auto-select="options.autoSelect" ng-repeat="summary in jobSummary">
                                              <td md-cell style="padding: 10px 20px; width: 40px;">{{$index + 1}}.</td>
                                              <td md-cell>{{summary.summary}}</td>
                                            </tr>
                                          </tbody>
                                        </table>
                                      </md-table-container>
                                    <!-- <md-grid-list md-cols="2" ng-repeat="summary in jobSummary"  md-gutter="1em" md-row-height="15px" style="width: 300px;">
                                        <md-grid-tile>{{summary.summary}}</md-grid-tile>
                                    </md-grid-list> -->
                                </div>
                            </div>
                            <div class="visits" flex>
                                <h2 class="legend_style2" style="margin-top:40px;">
                                    <md-icon class="icon_padding" md-svg-src="./assets/icons/svg/added/Admit.svg"></md-icon>Adjusted Responsibilities/Additional Comments</h2>
                                <div>
                                    <md-table-container>
                                        <table md-table ng-model="selected" md-progress="promise">
                                          <!-- <thead md-head>
                                            <tr md-row>
                                              <th md-column md-order-by="name" ><span style="font-weight: bold; font-size:15px;">Creed </span></th>
                                              <th md-column md-order-by="type"><span style="font-weight: bold; font-size:15px;">Definitions</span></th>
                                              <th md-column md-order-by="type"><span style="font-weight: bold; font-size:15px;">Ratings</span></th>
                                            </tr>
                                          </thead> -->
                                          <tbody md-body>
                                            <tr md-row md-select="user" md-on-select="logItem" md-auto-select="options.autoSelect" ng-repeat="comment in additionalComments">
                                              <td md-cell style="padding: 10px 20px; width: 40px;">{{$index + 1}}.</td>
                                              <td md-cell>{{comment.comment}}</td>
                                            </tr>
                                          </tbody>
                                        </table>
                                      </md-table-container>

                                  <!-- <md-grid-list md-cols="2" ng-repeat="comment in additionalComments"  md-gutter="1em" md-row-height="15px" style="width: 300px;">
                                        <md-grid-tile>{{comment.comment}}</md-grid-tile>
                                    </md-grid-list> -->
                                </div>
                            </div>
                            </div>
                          </div>
                        </fieldset>
                        <fieldset id="viewfieldset" style="padding: 10px;">
                          <legend class="legend_style">PERFORMANCE APPRAISAL</legend>
                            <div class="personal-profile" layout="row">
                              <div class="profile-details" layout="column" flex>

                                  <div class="details" layout="column" layout-wrap>
                                      <div flex>
                                          <p style="font-weight: bold; font-size:15px;">Accomplishment of key responsibilities/deliverables:</p>
                                          <span style="margin:20px;">{{performanceAppraisal.accomplishment}}</span>
                                      </div>
                                      <div flex>
                                          <p style="font-weight: bold; font-size:15px;">Achievement of the goals established during the past year: </p>
                                          <span style="margin:20px;">{{performanceAppraisal.achievement}}</span>
                                      </div>
                                      <div flex>
                                          <p style="font-weight: bold; font-size:15px;">Identify areas of exceptional performance on your part that should be particularly noted.  Provide specific examples. </p>
                                          <span style="margin:20px;">{{performanceAppraisal.exceptionalPerformance}}</span>
                                      </div>
                                      <div flex>
                                          <p style="font-weight: bold; font-size:15px;">In your current position, can you share an example where you have demonstrated your leadership? Provide specific examples.</p>
                                          <span style="margin:20px;">{{performanceAppraisal.leadership}}</span>
                                      </div>
                                      <div flex>
                                          <p style="font-weight: bold; font-size:15px;">In your current position, can you share an example where you have taken ownership? Provide specific examples.</p>
                                          <span style="margin:20px;">{{performanceAppraisal.ownership}}</span>
                                      </div>
                                      <div flex>
                                          <p style="font-weight: bold; font-size:15px;">Identify areas of your performance needing more attention or improvement.  Provide specific examples.</p>
                                          <span style="margin:20px;">{{performanceAppraisal.improvement}}</span>
                                      </div>
                                      <div flex>
                                          <p style="font-weight: bold; font-size:15px;"> Apart from your current role, is there any other role in the organization you will like to function in? Please specify the role,
                                             state the reasons for your choice and articulate how you intend to contribute to the goal of the organization by functioning in this role</p>
                                          <span style="margin:20px;">{{performanceAppraisal.anyOtherRole}}</span>
                                      </div>
                                    </div>
                                  </div>
                                </div>
              </fieldset>
      <fieldset id="viewfieldset" style="padding: 10px;">
      <legend class="legend_style">FOUNDING PHILOSOPHY</legend>
        <div class="personal-profile" layout="row">
          <div class="profile-details" layout="column" flex>
            <md-table-container>
              <table md-table ng-model="selected" md-progress="promise">
                <thead md-head>
                  <tr md-row>
                    <th md-column md-order-by="name" ><span style="font-weight: bold; font-size:15px;">Creed </span></th>
                    <th md-column md-order-by="type"><span style="font-weight: bold; font-size:15px;">Definitions</span></th>
                    <th md-column md-order-by="type"><span style="font-weight: bold; font-size:15px;">Ratings</span></th>
                  </tr>
                </thead>
                <tbody md-body>
                  <tr md-row md-select="user" md-on-select="logItem" md-auto-select="options.autoSelect"  ng-repeat="philosophy in foundingPhilosophy">
                    <td md-cell>{{philosophy.name}}</td>
                    <td md-cell>{{philosophy.definition}}</td>
                    <td md-cell>
                        {{philosophy.rating==4?'Exceptional':philosophy.rating==3?'Good':philosophy.rating==2?'Below Average':'Poor'}}
                    </td>
                  </tr>
                </tbody>
              </table>
            </md-table-container>
            <p>
              <div flex>
                  <p style="font-weight: bold; font-size:15px;">Key achievement / client feedback on my performance in relation to the founding philosophy</p>
                  <span style="margin:20px;">{{clientFeedback.feedBack}}</span>
              </div>
            </p>
          </div>
        </div>
      </fieldset>
      <fieldset id="viewfieldset" style="padding: 10px;">
      <legend class="legend_style">OVERALL ASSESSMENT</legend>
        <div class="personal-profile" layout="row">
          <div class="profile-details" layout="column" flex>

            <div class="details" layout="row" layout-wrap>
                <div flex>

                  <span>{{
                    overallAssessment.overall ==1?'No Basis:  had little opportunity to demonstrate this Performance Factor during the assessment period.  ':overallAssessment.overall==2?'Does Not Meet Expectations:  Has difficulty demonstrating this Performance Factor; significant improvement is required. ':overallAssessment.overall==3?'Partially Meets Expectations:  Effectively demonstrates the Performance Factor in many, but not all situations, and/or some improvement is required.':overallAssessment.overall==4?'Meets Expectations:  Effectively demonstrates the Performance Factor, all of the time, in all situations, consistently in line with expectations.':overallAssessment.overall==5?'Exceeds Expectations:  Demonstrates this Performance Factor consistently above and beyond expectations.  ':overallAssessment.overall==0?'Individual has not been in position long enough (at least three (3) months) to fully demonstrate the competencies required for the position. This appraisal is provided for feedback purposes.':''
                  }}</span>
              </div>
            </div>
          </div>
        </div>
      </fieldset>
      <fieldset id="viewfieldset">
      <legend class="legend_style">DEVELOPMENT PLAN</legend>
        <div class="personal-profile" layout="row">
          <div class="profile-details" layout="column" flex>

            <div class="details" layout="column" layout-wrap>
                <fieldset>
                    <legend class="legend_style2">{{developmentPlans[0]['plan']}}</legend>
                    <div flex>
                        <p style="font-weight: bold; font-size:15px;">Competences</p>
                        <span style="margin:20px;">{{developmentPlans[0]['competences']}}</span>
                    </div>
                    <div flex>
                        <p style="font-weight: bold; font-size:15px;">Actions </p>
                        <span style="margin:20px;">{{developmentPlans[0]['actions']}}</span>
                    </div>
                    <div flex>
                        <p style="font-weight: bold; font-size:15px;">Due Date </p>
                        <span style="margin:20px;">{{developmentPlans[0]['dueDate']|date}}</span>
                    </div>
                </fieldset>
                <fieldset>
                    <legend class="legend_style2">{{developmentPlans[1]['plan']}}</legend>
                    <div flex>
                        <p style="font-weight: bold; font-size:15px;">Competences</p>
                        <span style="margin:20px;">{{developmentPlans[1]['competences']}}</span>
                    </div>
                    <div flex>
                        <p style="font-weight: bold; font-size:15px;">Actions</p>
                        <span style="margin:20px;">{{developmentPlans[1]['actions']}}</span>
                    </div>
                    <div flex>
                        <p style="font-weight: bold; font-size:15px;">Due Date </p>
                        <span style="margin:20px;">{{developmentPlans[1]['dueDate']|date}}</span>
                    </div>
                </fieldset>
            </div>
          </div>
        </div>
      </fieldset>
      <fieldset id="viewfieldset" style="padding: 10px;" ng-show="lineManagerComment && loggedInUser.roles!='LINE_MANAGER'">
        <legend class="legend_style">MANAGER'S RATING AND COMMENT</legend>
        <div class="personal-profile" layout="row">
          <div class="profile-details" layout="column" flex>
        <div flex>
            <p style="font-weight: bold; font-size:15px;">Final Rating</p>
            <span style="margin:20px;">{{lineManagerComment.finalRating}}</span>
        </div>
        <div flex>
            <p style="font-weight: bold; font-size:15px;">Comment</p>
            <span style="margin:20px;">{{lineManagerComment.comment}}</span>
        </div>
          </div>
        </div>
    </fieldset>
      <fieldset style="padding: 10px;"  id="viewfieldset">
      <legend class="legend_style">{{loggedInUser.roles=='TOP_MANAGER' &&lineManagerComment?"FINAL APPROVAL":'SIGN-OFF/APPROVAL'}}</legend>
        <div class="personal-profile" layout="row">
          <div class="profile-details" layout="column" flex>
            <div class="details" layout="column" layout-wrap>
                <div layout="row" flex>
                    <div flex="15">
                        <label class="tiredlabel"><span class="" style="font-weight: bold; font-size:15px; display: inline; padding: 0px;">*</span> Final Rating:</label>
                    </div>
                    <md-input-container class="tiredinput" flex="80">
                      <label></label>
                      <textarea md-no-asterisk type="text" ng-model="review.finalRating" required></textarea>
                    </md-input-container>
                  </div>
              <div layout="row" flex>
                <div flex="15">
                    <label class="tiredlabel"><span class="" style="font-weight: bold; font-size:15px; display: inline; padding: 0px;">*</span> Comment:</label>
                </div>
                <md-input-container class="tiredinput" flex="80">
                  <label></label>
                  <textarea md-no-asterisk type="text" ng-model="review.comment" required></textarea>
                </md-input-container>
              </div>
            </div>
          </div>
        </div>
      </fieldset>
      <div layout="row" layout-align="center center" ng-show="loggedInUser.roles=='TOP_MANAGER'||loggedInUser.roles=='LINE_MANAGER'">
          <md-button  class="md-raised md-accent"  ng-click="submitReveiw(true)" ng-disabled="review.finalRating==null||review.comment==null" style="margin-right:20px;">
              Approve
          </md-button>
          <md-button  class="md-raised md-accent"  ng-click="submitReveiw(false)" ng-disabled="review.finalRating==null||review.comment==null" style="margin-right:20px;">
              Decline
          </md-button>
        </div>
  </div>
      </md-dialog-content>
  <!-- <div class="buttom-button">
      <button ng-click="vm.RespondToQuickAction('new')">
          <md-icon md-svg-src="./assets/icons/svg/round-add-button.svg"></md-icon>
          Close
      </button>
  </div> -->
  </md-dialog>
